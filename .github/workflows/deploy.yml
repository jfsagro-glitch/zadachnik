name: Deploy CURSOR Pipeline Demo to GitHub Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Build project
      run: |
        # –°–æ–∑–¥–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è GitHub Pages
        mkdir -p dist
        cp -r public/* dist/
        
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π index.html –¥–ª—è GitHub Pages
        cat > dist/index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="ru">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>CURSOR Pipeline Demo</title>
            <style>
                body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    margin: 0;
                    padding: 20px;
                    min-height: 100vh;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                .container {
                    text-align: center;
                    color: white;
                    max-width: 800px;
                    background: rgba(255,255,255,0.1);
                    backdrop-filter: blur(10px);
                    border-radius: 20px;
                    padding: 40px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                }
                h1 { font-size: 3rem; margin-bottom: 20px; }
                .demo-badge {
                    background: linear-gradient(90deg, #ff6b6b, #ffa500);
                    padding: 10px 20px;
                    border-radius: 25px;
                    font-weight: bold;
                    display: inline-block;
                    margin: 20px 0;
                }
                .features {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin: 30px 0;
                }
                .feature {
                    background: rgba(255,255,255,0.1);
                    padding: 20px;
                    border-radius: 10px;
                }
                .buttons {
                    margin-top: 30px;
                }
                .btn {
                    display: inline-block;
                    padding: 15px 30px;
                    margin: 10px;
                    background: linear-gradient(45deg, #ff6b6b, #ffa500);
                    color: white;
                    text-decoration: none;
                    border-radius: 8px;
                    font-weight: bold;
                    transition: transform 0.3s;
                }
                .btn:hover {
                    transform: translateY(-2px);
                }
                .warning {
                    background: rgba(255,193,7,0.2);
                    border: 1px solid rgba(255,193,7,0.5);
                    padding: 15px;
                    border-radius: 8px;
                    margin: 20px 0;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>üöÄ CURSOR Pipeline Demo</h1>
                <div class="demo-badge">–î–ï–ú–û-–†–ï–ñ–ò–ú</div>
                
                <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</p>
                
                <div class="warning">
                    <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:</strong> –≠—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è. 
                    –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (Kanban –¥–æ—Å–∫–∞, API, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) 
                    —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å.
                </div>
                
                <div class="features">
                    <div class="feature">
                        <h3>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</h3>
                        <p>Kanban –¥–æ—Å–∫–∞, —Ü–≤–µ—Ç–æ–≤–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</p>
                    </div>
                    <div class="feature">
                        <h3>üë• –ö–æ–º–∞–Ω–¥—ã –∏ —Ä–æ–ª–∏</h3>
                        <p>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏, —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä—ã, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏</p>
                    </div>
                    <div class="feature">
                        <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                        <p>KPI –º–µ—Ç—Ä–∏–∫–∏, –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –æ—Ç—á–µ—Ç—ã</p>
                    </div>
                    <div class="feature">
                        <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                        <p>–°—Ä–æ–∫–∏, –ø—Ä–æ—Å—Ä–æ—á–∫–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤</p>
                    </div>
                </div>
                
                <div class="buttons">
                    <a href="https://github.com/jfsagro-glitch/zadachnik" class="btn">
                        üìÅ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
                    </a>
                    <a href="https://github.com/jfsagro-glitch/zadachnik/blob/main/README.md" class="btn">
                        üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                    </a>
                </div>
                
                <div style="margin-top: 30px; font-size: 0.9em; opacity: 0.8;">
                    <p>–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:</p>
                    <code style="background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px; display: block; margin: 10px 0;">
                        npm install && npm start
                    </code>
                </div>
            </div>
        </body>
        </html>
        EOF

    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      if: github.ref == 'refs/heads/main'
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
